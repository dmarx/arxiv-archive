%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% LaTeX macros of all kinds.
%% Also some side-effecting setup at the bottom.
%%

\let\iint\relax
\let\iiint\relax
% \usepackage[utf8x]{inputenc}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{thmtools}
%% \usepackage{amssymb}
\usepackage{latexsym}
\usepackage{wasysym}
\usepackage{stmaryrd}
\usepackage{soul}
\usepackage{fouridx}
% http://tex.stackexchange.com/questions/109900/how-can-i-box-multiple-aligned-equations
\usepackage{empheq}
% http://tex.stackexchange.com/questions/10121/how-to-make-double-cline-in-tables
% http://tex.stackexchange.com/questions/178630/latex-table-smallskip-breaks-vertical-lines
\usepackage{multirow}
\usepackage{hhline}
\usepackage{makecell}
%\usepackage[usenames,dvipsnames]{color}
% Careful: http://tex.stackexchange.com/questions/1863/which-packages-should-be-loaded-after-hyperref-instead-of-before
%\usepackage[colorlinks, citecolor=blue, urlcolor=blue]{hyperref}
% \usepackage{graphicx}
% \usepackage{tikz}
%\usetikzlibrary{positioning}
\let\st\relax
\usepackage{enumitem}
\usepackage{newfloat}
\usepackage{caption}
\usepackage{mdframed}
\usepackage{pifont}% http://ctan.org/pkg/pifont
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%

% equation numbering
% http://tex.stackexchange.com/questions/42726/align-but-show-one-equation-number-at-the-end
\newcommand\num{\addtocounter{equation}{1}\tag{\theequation}}

% tables
\newcommand\tableCell[2]{\multicolumn{1}{#1}{\bfseries #2}}
\newcommand\rowsHeader[2]{\multirow{#1}{*}{\rotatebox{90}{\bf #2}}}
\newcommand\colsHeader[3]{\multicolumn{#1}{#2}{\bf #3}}
% http://tex.stackexchange.com/questions/50352/inserting-a-small-vertical-space-in-a-table
\newcommand\padRowTop{\rule{0pt}{2.6ex}}
\newcommand\padRowBot{\rule[-1.2ex]{0pt}{0pt}}
\newcommand\padRow{\padRowTop\padRowBot}
\newcommand\padRowTopSmall{\rule{0pt}{2.0ex}}
\newcommand\padRowBotSmall{\rule[-0.6ex]{0pt}{0pt}}
\newcommand\padRowSmall{\padRowTopSmall\padRowBotSmall}
% http://tex.stackexchange.com/questions/3445/latex-tables-how-do-i-make-bold-horizontal-lines-typically-hline
\def\hlinewd#1{%
\noalign{\ifnum0=`}\fi\hrule \@height #1 %
\futurelet\reserved@a\@xhline}

% http://tex.stackexchange.com/questions/13267/vertical-space-around-theorems
% \newtheoremstyle{slimthm}% name
%   {.5\baselineskip\@plus.2\baselineskip\@minus.2\baselineskip}% Space above
%   {.1\baselineskip\@plus.1\baselineskip\@minus.1\baselineskip}% Space below
%   {\itshape}% Body font
%   {}%Indent amount (empty = no indent, \parindent = para indent)
%   {\bfseries}%  Thm head font
%   {.}%       Punctuation after thm head
%   { }%      Space after thm head: " " = normal interword space;
%         %       \newline = linebreak
%   {}%       Thm head spec


% \theoremstyle{slimthm}

% amsthm package
%% \theoremstyle{theorem}
%% \newtheorem{thm}{Theorem}[section]
%% \newtheorem{theorem}{Theorem}[section]
%% \newtheorem{lem}[thm]{Lemma}
%% \newtheorem{lemma}[thm]{Lemma}
%% \newtheorem{cor}[thm]{Corollary}
%% \newtheorem{corollary}[thm]{Corollary}
%% \newtheorem{prop}[thm]{Proposition}
%% \newtheorem{proposition}[thm]{Proposition}
%% \newtheorem{fact}[thm]{Fact}
%% \newtheorem{prob}[thm]{Problem}
%% \newtheorem{problem}[thm]{Problem}
%% \newtheorem{claim}[thm]{Claim}
%% \newtheorem{defn}[thm]{Definition}
%% \newtheorem{definition}[thm]{Definition}
%% \newtheorem{assm}[thm]{Assumption}
%% \newtheorem{assumption}[thm]{Assumption}
%% \newtheorem{conj}[thm]{Conjecture}
%% \newtheorem{conjecture}[thm]{Conjecture}
%% %\newtheorem{algo}[thm]{Algorithm}
%% \theoremstyle{definition}
%% \newtheorem{example}[thm]{Example}
%% \newtheorem{rem}[thm]{Remark}
%% \newtheorem{remark}[thm]{Remark}
%% \newtheorem{exercise}[thm]{Exercise}

% \makeatletter
% \def\thm@space@setup{%
%   \thm@preskip=1em plus 1cm minus 2cm
%   \thm@postskip=\thm@preskip % or whatever, if you don't want them to be equal
% }
% \makeatother

% \declaretheoremstyle[%
%   spaceabove=-6pt,%
%   spacebelow=6pt,%
%   headfont=\normalfont\itshape,%
%   postheadspace=1em,%
%   qed=\qedsymbol%
% ]{noSpaceProof}
% \declaretheorem[name={Proof},style=noSpaceProof,unnumbered,
% ]{prf}

% \declaretheoremstyle[%
%   spaceabove=-6pt,%
%   spacebelow=6pt,%
%   headfont=\normalfont\itshape,%
%   postheadspace=1em%
% ]{noSpaceProofSketch}
% \declaretheorem[name={Proof sketch},style=noSpaceProofSketch,unnumbered,
% ]{prfsketch}

% \let\oldthm\thm
% \renewcommand{\thm}{\oldthm\normalfont}
% \let\oldlem\lem
% \renewcommand{\lem}{\oldlem\normalfont}
% \let\oldrem\rem
% \renewcommand{\rem}{\oldrem\normalfont}
% \let\oldcor\cor
% \renewcommand{\cor}{\oldcor\normalfont}
% \let\oldprop\prop
% \renewcommand{\prop}{\oldprop\normalfont}
% \let\oldfact\fact
% \renewcommand{\fact}{\oldfact\normalfont}
% \let\oldprob\prob
% \renewcommand{\prob}{\oldprob\normalfont}
% \let\olddefn\defn
% \renewcommand{\defn}{\olddefn\normalfont}
% \let\oldalgo\algo
% \renewcommand{\algo}{\oldalgo\normalfont}
% \let\oldexample\example
% \renewcommand{\example}{\oldexample\normalfont}
% \let\oldexercise\exercise
% \renewcommand{\exercise}{\oldexercise\normalfont}
% \let\oldclaim\claim
% \renewcommand{\claim}{\oldclaim\normalfont}

% Blank footnote
% http://tex.stackexchange.com/questions/30720/footnote-without-a-marker
\newcommand\blfootnote[1]{%
  \begingroup
  \renewcommand\thefootnote{}\footnote{#1}%
  \addtocounter{footnote}{-1}%
  \endgroup
}

% best practices
\newcommand\eqnref[1]{(\ref{#1})}

% text style
\newcommand{\yell}[1]{\textbf{#1} \;\; }
\newcommand{\vocab}{\emph}
\newcommand{\alg}{\textsf}
\newcommand{\ttt}{\texttt}
\newcommand{\system}{\textsc}

% symmetry
\newcommand\bigpar[1]{\left( #1 \right)}
\newcommand\bigPar{\bigpar}
\newcommand\bp{\bigpar}
\newcommand\bigsqbra[1]{\left[ #1 \right]}
\newcommand\bigSqbra{\bigsqbra}
\newcommand\bigbra{\bigsqbra}
\newcommand\bigBra{\bigsqbra}
\newcommand\bigbrak{\bigsqbra}
\newcommand\bigBrak{\bigsqbra}
\newcommand\bb{\bigsqbra}
\newcommand\bigset[1]{\left\{ {#1} \right\}}
\newcommand\bigSet{\bigset}
\newcommand\bs{\bigset}
\newcommand\bigmin[1]{\min\bigset{#1}}
\newcommand\bmin{\bigmin}
\newcommand\bigmax[1]{\max\bigset{#1}}
\newcommand\bmax{\bigmax}
\newcommand\bigceil[1]{\left\lceil #1 \right\rceil}
\newcommand\bigfloor[1]{\left\lfloor #1 \right\rfloor}
\newcommand\bigexp[1]{\exp\left( {#1} \right)}
\newcommand\bigExp{\bigexp}
\newcommand\bexp{\bigexp}
\newcommand\biglog[1]{\log\left( {#1} \right)}
\newcommand\bigLog{\biglog}
\newcommand\angbra[1]{\langle {#1} \rangle}
\newcommand\bigangbra[1]{\left\langle {#1} \right\rangle}
%% \newcommand\hinge[1]{\left[{#1}\right]_+}

% align environment
\newcommand\pheq{\phantom{{}={}}}
\newcommand\nn{\nonumber}

% abbreviations for common stuff
\newcommand\itr[1]{{({#1})}}
\newcommand\ith[2]{{#2}^{({#1})}}

\newcommand\R{\mathbb{R}}
\newcommand\Z{\mathbb{Z}}
\newcommand\N{\mathbb{N}}
\newcommand\mc{\mathcal}
\newcommand\tl{\tilde}
\newcommand\tlm[1]{\tilde{\mathcal{#1}}}
\newcommand\ep{\epsilon}
\newcommand\eps{\ep}
\newcommand\vep{\varepsilon}
\newcommand\veps{\vep}
%% \newcommand\w{\omega}
\newcommand\al{\alpha}
\newcommand\sm{\setminus}
\newcommand\mA{\mc{A}}
\newcommand\mB{\mc{B}}
\newcommand\mC{\mc{C}}
\newcommand\mD{\mc{D}}
\newcommand\mE{\mc{E}}
\newcommand\mF{\mc{F}}
\newcommand\mG{\mc{G}}
\newcommand\mH{\mc{H}}
\newcommand\mI{\mc{I}}
\newcommand\mJ{\mc{J}}
\newcommand\mK{\mc{K}}
\newcommand\mL{\mc{L}}
\newcommand\mM{\mc{M}}
\newcommand\mN{\mc{N}}
\newcommand\mO{\mc{O}}
\newcommand\mP{\mc{P}}
\newcommand\mQ{\mc{Q}}
\newcommand\mR{\mc{R}}
\newcommand\mS{\mc{S}}
\newcommand\mT{\mc{T}}
\newcommand\mU{\mc{U}}
\newcommand\mV{\mc{V}}
\newcommand\mW{\mc{W}}
\newcommand\mX{\mc{X}}
\newcommand\mY{\mc{Y}}
\newcommand\mZ{\mc{Z}}

\newcommand\tlA{\tl{A}}
\newcommand\tlB{\tl{B}}
\newcommand\tlC{\tl{C}}
\newcommand\tlD{\tl{D}}
\newcommand\tlE{\tl{E}}
\newcommand\tlF{\tl{F}}
\newcommand\tlG{\tl{G}}
\newcommand\tlH{\tl{H}}
\newcommand\tlI{\tl{I}}
\newcommand\tlJ{\tl{J}}
\newcommand\tlK{\tl{K}}
\newcommand\tlL{\tl{L}}
\newcommand\tlM{\tl{M}}
\newcommand\tlN{\tl{N}}
\newcommand\tlO{\tl{O}}
\newcommand\tlP{\tl{P}}
\newcommand\tlQ{\tl{Q}}
\newcommand\tlR{\tl{R}}
\newcommand\tlS{\tl{S}}
\newcommand\tlT{\tl{T}}
\newcommand\tlU{\tl{U}}
\newcommand\tlV{\tl{V}}
\newcommand\tlW{\tl{W}}
\newcommand\tlX{\tl{X}}
\newcommand\tlY{\tl{Y}}
\newcommand\tlZ{\tl{Z}}
\newcommand\tla{\tl{a}}
\newcommand\tlb{\tl{b}}
\newcommand\tlc{\tl{c}}
\newcommand\tld{\tl{d}}
\newcommand\tle{\tl{e}}
\newcommand\tlf{\tl{f}}
\newcommand\tlg{\tl{g}}
\newcommand\tlh{\tl{h}}
\newcommand\tli{\tl{i}}
\newcommand\tlj{\tl{j}}
\newcommand\tlk{\tl{k}}
\newcommand\tll{\tl{l}}
%\newcommand\tlm{\tl{m}} % exists
\newcommand\tln{\tl{n}}
\newcommand\tlo{\tl{o}}
\newcommand\tlp{\tl{p}}
\newcommand\tlq{\tl{q}}
\newcommand\tlr{\tl{r}}
\newcommand\tls{\tl{s}}
\newcommand\tlt{\tl{t}}
\newcommand\tlu{\tl{u}}
\newcommand\tlv{\tl{v}}
\newcommand\tlw{\tl{w}}
\newcommand\tlx{\tl{x}}
\newcommand\tly{\tl{y}}
\newcommand\tlz{\tl{z}}
\newcommand\tltheta{\tl{\theta}}

% text abbreviations
\newcommand\ie{\textit{i.e.}\ }
\newcommand\ieComma{\textit{i.e.}, }
\newcommand\eg{\textit{e.g.}\ }
\newcommand\egComma{\textit{e.g.}, }
\newcommand\twlog{w.l.o.g.\ }
\newcommand\aka{a.k.a.\ }
\newcommand\whp{w.h.p.\ }
\newcommand\whpp{w.h.p} % p for partial
\newcommand\wrt{w.r.t.\ }
\newcommand\etal{et.\ al.\ }
\newcommand\etalp{et.\ al} % p for partial
\newcommand\vs{vs.\ }
\newcommand\resp{resp.\ }
%% \newcommand\cf{cf.\ }
\newcommand\iid{i.i.d.\ }
\newcommand\iidp{i.i.d.}

% linear algebra
\let\oldvec\vec
\renewcommand{\vec}[1]{\mathbf{#1}}
\newcommand{\opvec}{\operatorname{vec}}
\newcommand{\mat}[1]{\mathbf{#1}}
\newcommand{\bmat}[1]{\begin{bmatrix} #1 \end{bmatrix}}
\newcommand{\bmatcols}[2]{
  \bmat{
    \mid &        & \mid \\
    {#1} & \cdots & {#2} \\
    \mid &        & \mid }}
\newcommand{\bmatrows}[2]{
  \bmat{
    \text{---} & {#1}   & \text{---} \\
               & \vdots &            \\
    \text{---} & {#2}   & \text{---} }}
\newcommand{\innprod}[1]{\left\langle {#1} \right\rangle}
\newcommand{\innProd}{\innprod}
\newcommand{\inprod}{\innprod}
\newcommand{\inp}{\innprod}
\newcommand{\tinp}[1]{\langle {#1} \rangle}
\newcommand{\symmat}{\mathbf{S}} % \mS^k is space of symmetric k x k matrices
\newcommand{\tr}{\operatorname{tr}} % trace
\newcommand{\determ}[1]{\operatorname{det}\bigpar{#1}} % determinant
%\renewcommand{\det}{\determ}
\newcommand{\diag}{\operatorname{diag}}
\newcommand{\diagm}{\operatorname{diagm}}
\newcommand{\rank}{\operatorname{rank}}
\newcommand{\lspan}{\operatorname{span}}
\newcommand{\proj}{\operatorname{proj}}
\newcommand{\mpinv}{\dagger} % Moore-Penrose pseudoinverse superscript symbol
\newcommand{\nullity}{\operatorname{nullity}}
\newcommand{\aff}{\operatorname{\mathbf{aff}}} % affine hull
%% \newcommand{\conv}{\operatorname{\mathbf{conv}}} % convex hull
\newcommand{\relint}{\operatorname{\mathbf{relint}}} % relative interior
%% \newcommand{\cl}{\operatorname{\mathbf{cl}}} % closure
\newcommand{\im}{\operatorname{im}} % function image / matrix colspan
%\newcommand{\ker}{\operatorname{\ker}} % function kernel / matrix nullspace
\newcommand\tensor{\otimes}
\newcommand\eig[1]{\lambda_{#1}}
\newcommand\eigmin{\eig{\text{min}}}
\newcommand\eigmax{\eig{\text{max}}}
\newcommand\sing[1]{\sigma_{#1}}
\newcommand\singmin{\sing{\operatorname{min}}}
\newcommand\singmax{\sing{\operatorname{max}}}
\newcommand\ones{\vec{1}}

% differential calculus and geometry
\newcommand{\dd}[2]{{\frac {d {#1}} {d {#2}}}}
\newcommand{\deldel}[2]{{\frac {\partial {#1}} {\partial {#2}}}}
\newcommand{\deldelSecond}[2]{{\frac {\partial^2 {#1}} {\partial {#2}^2}}}
\newcommand{\deldelTwovar}[3]{{\frac {\partial^2 {#1}} {\partial {#2} \partial {#3}}}}
\newcommand{\grad}{\nabla}
\newcommand{\subgrad}{\partial}
\newcommand\evalAt[2]{\left. \left[ {#1} \right] \right|_{#2}}
\newcommand\Vol{\operatorname{Vol}}
\newcommand\goesto[1]{\xrightarrow{#1}}

% optimization
\newcommand\opt[1]{{#1}^\star}
\newcommand\prox{\textbf{prox}}
\newcommand{\minproblemNoST}[2]{
  \begin{array}{cl}
    \underset{#1}{\min} & {#2}
  \end{array}
}
\newcommand{\minproblem}[3]{
  \begin{array}{cl}
    \underset{#1}{\min} & {#2} \\
                  \text{subject to}   #3
  \end{array}
}
\newcommand{\maxproblemNoST}[2]{
  \begin{array}{cl}
    \underset{#1}{\max} & {#2}
  \end{array}
}
\newcommand{\maxproblem}[3]{
  \begin{array}{cl}
    \underset{#1}{\max} & {#2} \\
                  \text{subject to}   #3
  \end{array}
}

% stats/ml/tcs
\renewcommand\Pr{\mathbb{P}} % Controversial, I know.
\newcommand\bigPr[1]{\Pr\bigpar{#1}}
%% \newcommand\E{\mathbb{E}} % Expected value
\newcommand\bigE[2]{\E_{#1} \left[ {#2} \right]}
%% \newcommand\Var{\operatorname{var}} % Variance
\newcommand\Cov{\operatorname{cov}} % Covariance
%% \newcommand\var{\Var}
\newcommand\cov{\Cov}
\newcommand\corr{\operatorname{corr}} % Correlation
\newcommand\gvn{\;\middle|\;} % From ``given'', i.e. conditioned on.
\newcommand\indic{\mathbb{I}}
\newcommand\truth[1]{{#1}_\star}
\newcommand\I{\indic}
\newcommand\eqdist{\stackrel{d}{=}}
\newcommand\event{\mc{E}}
\newcommand\KL{\operatorname{KL}} % Kullback-Leibler divergence.
\newcommand\DKL{D_{\KL}} % Kullback-Leibler divergence.
\newcommand\classlabel{\textsf} % Classifier label (e.g. "Yes"/"No").
\newcommand\probto{\goesto{P}} % Converges in probability
\newcommand\distto{\goesto{d}} % Converges in distribution
\newcommand\dom{\operatorname{dom}} % Domain
\newcommand\sigmoid[1]{\sigma({#1})}
\newcommand\vecSigmoid[1]{\oldvec\sigma({#1})}
\newcommand\bigSigmoid[1]{\sigma\left( {#1} \right)}
\newcommand\bigVecSigmoid[1]{\oldvec\sigma\left( {#1} \right)}
\newcommand\lse{\operatorname{LSE}}
\newcommand\LSE{\lse}
\newcommand\VC{\operatorname{VC}} % VC dimension
\newcommand\Radem{\mathcal{R}} % Rademacher
\newcommand\seqRadem{\mathcal{R}^{\text{seq}}} % Sequential Rademacher
\newcommand\Ldim{\operatorname{Ldim}} % Littlestone dimension
\newcommand\bigO{\mathcal{O}} % Fancy big-O
\newcommand\Reg{\operatorname{Regret}}
%\newcommand\Regret{\Reg}

% sampling, distributions
\makeatletter
\newcommand\distas[1]{\mathbin{\overset{#1}{\kern\z@\sim}}}%
\newsavebox{\mybox}\newsavebox{\mysim}
\newcommand\distras[1]{%
  \savebox{\mybox}{\hbox{\kern3pt$\scriptstyle#1$\kern3pt}}%
  \savebox{\mysim}{\hbox{$\sim$}}%
  \mathbin{\overset{#1}{\kern\z@\resizebox{\wd\mybox}{\ht\mysim}{$\sim$}}}%
}
\makeatother
\newcommand\samp{\sim}  % Some use \newcommand\samp{\xleftarrow{R}}
\newcommand\sampiid{\distras{\text{iid}}}
\newcommand\supp{\operatorname{supp}}
\newcommand\Unif{\operatorname{Unif}}
\newcommand\Ber{\operatorname{Ber}} % Bernoulli
\newcommand\Beta{\operatorname{Beta}} % Beta distribution
\newcommand\Gaussian{\mathcal{N}}
\newcommand\Normal{\Gaussian}
\newcommand\Dirichlet{\operatorname{Dir}}
\newcommand\Categorical{\operatorname{Cat}}
\newcommand\Binomial{\operatorname{Bin}}
%
\newcommand\gaussian{\Gaussian}
\newcommand\normal{\Normal}
\newcommand\dirichlet{\Dirichlet}
\newcommand\categorical{\Categorical}

% misc functions, operators, the like
%% \newcommand\half{\frac{1}{2}}
%% \newcommand\sign{\operatorname{sign}}
\newcommand\abs[1]{| {#1} |}
\newcommand\bigabs[1]{\left| {#1} \right|}
\newcommand\card[1]{| {#1} |}
\newcommand\bigcard[1]{\left| {#1} \right|}
\newcommand\norm[1]{\| {#1} \|}
\newcommand\bignorm[1]{\left\| {#1} \right\|}
\newcommand\normfr[1]{\| {#1} \|_{\operatorname{Fr}}}
\newcommand\bignormfr[1]{\left\| {#1} \right\|_{\operatorname{Fr}}}
\newcommand\opnorm[1]{{\left\vert\kern-0.25ex\left\vert\kern-0.25ex\left\vert #1 
    \right\vert\kern-0.25ex\right\vert\kern-0.25ex\right\vert}}
\newcommand{\ltwo}[1]{\norm{#1}_2}
\newcommand{\lone}[1]{\norm{#1}_1}
\newcommand{\linf}[1]{\norm{#1}_\infty}
\newcommand\sgn{\operatorname{sgn}}
\newcommand\compose{\circ}
\newcommand\argmin{\operatorname*{argmin}}
%% \newcommand\argmax{\operatorname*{argmax}}
\newcommand\wt{\operatorname{wt}} % Hamming weight
\newcommand\lhs{\operatorname{LHS}}
\newcommand\rhs{\operatorname{RHS}}
\newcommand\textif{\text{if }}
\newcommand\textelse{\text{else}}
\newcommand\textow{\text{otherwise}}
\newcommand\textwhere{\text{where }}
\newcommand\textsuchthat{\text{such that }}
\newcommand\textsubjto{\text{subject to }}
\newcommand\textand{\text{and }}
\newcommand\textforall{\text{for all }}
\newcommand\textfor{\text{for }}
\newcommand\textwhen{\text{when }}
\newcommand\textwhenever{\text{whenever }}
\newcommand\vectorize{\operatorname{vec}}
\newcommand\vecize{\vectorize}

% misc renaming and shorthand
\newcommand\bits{\{ 0, 1 \}}
\newcommand\hypc{\{ -1, 1 \}}
\newcommand\st{\text{ s.t. }}
\newcommand\by{\times}
\newcommand\set[1]{\{ {#1} \}}
%\newcommand\defeq{\triangleq}
\newcommand\defeq{\ensuremath{\stackrel{\rm def}{=}}}
%\newcommand\T{\top}
%\newcommand\T{\intercal}
%\newcommand\T{T}
\newcommand\T{\mathsf{T}}
\newcommand\inv{{-1}}
\newcommand\tsum{\textstyle\sum}

% nlp & pl
\newcommand\cat{\mathsc}
\newcommand\denot[1]{\llbracket {#1} \rrbracket}

%% \newcommand{\todo}[1]{{\tiny \textcolor{red}{[TODO: {#1}]}}}
\newcommand{\todomath}[1]{\text{\tiny \textcolor{red}{[TODO: {#1}]}}}
\definecolor{electricpurple}{rgb}{0.75, 0.0, 1.0}
\newcommand{\rf}[1]{\noindent{\textcolor{electricpurple}{{\bf RF:} \em #1}}}
\newcommand{\rfmath}[1]{\text{\textcolor{electricpurple}{{\bf RF:} \em #1}}}
\newcommand{\todorf}[1]{\noindent\textcolor{electricpurple}{[TODO (rf): {#1}]}}
\newcommand{\todorfmath}[1]{\text{\textcolor{electricpurple}{[TODO (rf): {#1}]}}}
%\newcommand{\todo}[1]{{\tiny \hl{\textsc{TODO:} #1}}}
%\newcommand{\todo}[1]{}
\newcommand{\greyed}[1]{\textcolor{gray}{ {#1} }}
\newcommand{\annot}[1]{\textbf{\textcolor{RoyalPurple}{ {#1} }}}
\newcommand{\blue}[1]{\textcolor{blue}{ {#1} }}

% Horizontal rules

\newcommand\hrblack{\noindent\rule{\textwidth}{1pt}}
\newcommand\hrgray{\noindent\textcolor[RGB]{220,220,220}{\rule{\linewidth}{1pt}}}

% Simple boxed environments. Useful for moments of "hang on a minute,
% here's an idea to try".

\newenvironment{whitebox}{
  \begin{mdframed}[roundcorner=10pt]
}{
  \end{mdframed}
}

\definecolor{blueboxedinner}{rgb}{.7,.7,1}
\definecolor{blueboxedouter}{rgb}{.2,.2,1}
\newcommand{\blueboxed}[1]{
  \indent\fcolorbox{blueboxedouter}{blueboxedinner}{
    \begin{minipage}{0.9\textwidth}
      {#1}
    \end{minipage}
  } \\
}

\newcommand\rfcomment[1]{\blueboxed{\textcolor{blue}{\bf RF:} {#1}}}
\newcommand\yscomment[1]{\blueboxed{\textcolor{blue}{\bf YS:} {#1}}}
\newcommand\adcomment[1]{\blueboxed{\textcolor{blue}{\bf AD:} {#1}}}

% Roll-my-own dirt simple algorithm-box environment

\DeclareFloatingEnvironment[fileext=alg,placement={!ht},name=Algorithm]{simplealgofloat}
\captionsetup[simplealgofloat]{labelfont=bf}
\newenvironment{simplealgo}{
  \begin{simplealgofloat}[tb]
  \begin{mdframed}[roundcorner=10pt,backgroundcolor=blue!10]
  \begin{enumerate}[leftmargin=*]
    \setlength{\itemsep}{1pt}
    \setlength{\parskip}{0pt}
    \setlength{\parsep}{0pt}
}{
  \end{enumerate}
  \end{mdframed}
  \end{simplealgofloat}
}
\newenvironment{simplealgo*}{
  \begin{simplealgofloat}[tb]
  \begin{mdframed}[roundcorner=10pt,backgroundcolor=blue!10]
  \begin{itemize}[leftmargin=*]
    \setlength{\itemsep}{1pt}
    \setlength{\parskip}{0pt}
    \setlength{\parsep}{0pt}
}{
  \end{itemize}
  \end{mdframed}
  \end{simplealgofloat}
}

\newcommand\algocomment{\hfill\# }

% environment-wrapping commands

\newcommand{\itemizing}[1]{
  \begin{itemize}
    {#1}
  \end{itemize}
}

\newcommand{\enumerating}[1]{
  \begin{enumerate}
    {#1}
  \end{enumerate}
}

% beamer (slides)

\newcommand{\rfframe}[2]{
  \begin{frame}{#1}
    \begin{overlayarea}{\textwidth}{\textheight}
      {#2}
    \end{overlayarea}
  \end{frame}
}

\newcommand{\rfframecols}[4]{
  \rfframe{#2}{
    \begin{columns}[{#1}]
      \begin{column}{0.5\textwidth}
        {#3}
      \end{column}
      \begin{column}{0.5\textwidth}
        {#4}
      \end{column}
    \end{columns}
  }
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Setup

% Make itemize lists reasonable.  Namely:
% - allow depth 9, and
% - decrease item separation space.
% \usepackage{enumitem}
% \setlistdepth{9}
% \setlist[itemize,2,3,4,5,6,7,8,9]{itemsep=.1em}
% \let\mylabelitemi\labelitemi
% \let\mylabelitemii\labelitemii
% \let\mylabelitemiii\labelitemiii
% \let\mylabelitemiv\labelitemiv
% \setlist[itemize,1]{label=\mylabelitemi}
% \setlist[itemize,2]{label=\mylabelitemii}
% \setlist[itemize,3]{label=\mylabelitemiii}
% \setlist[itemize,4]{label=\mylabelitemiv}
% \setlist[itemize,5]{label=\mylabelitemiv}
% \setlist[itemize,6]{label=\mylabelitemiv}
% \setlist[itemize,7]{label=\mylabelitemiv}
% \setlist[itemize,8]{label=\mylabelitemiv}
% \setlist[itemize,9]{label=\mylabelitemiv}
% \renewlist{itemize}{itemize}{9}
